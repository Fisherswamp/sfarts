!function(t){function e(e){for(var r,a,c=e[0],s=e[1],u=e[2],f=0,p=[];f<c.length;f++)a=c[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);for(l&&l(e);p.length;)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={0:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=s;i.push([101,1]),n()}({101:function(t,e,n){"use strict";n.r(e);var r,o=n(1),i=n.n(o),a=n(52),c=n.n(a),s=n(53),u=n.n(s);!function(t){t.CREATE_ACCOUNT="create",t.LOGIN="login",t.DISCONNECT="disconnect",t.ERROR="error",t.CONNECT="connect",t.GET_LOBBIES="get lobbies",t.JOIN_LOBBY="join lobby",t.CREATE_LOBBY="create lobby",t.START_GAME="start game",t.PLAYER_INPUT="player input",t.END_TURN_SIGNAL="end turn? maybe idk dude",t.GET_TIME_REMAINING="how much time is remaining bro",t.RESET_PLAYER_MOVES="undo that shit bro i fucked up",t.CONCEDE="i give in!!!!",t.GAME_HAS_ENDED="game over gg wp no re"}(r||(r={}));var l,f,p=r;!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.USER_NOT_EXIST=1]="USER_NOT_EXIST",t[t.PASSWORD_INCORRECT=2]="PASSWORD_INCORRECT"}(l||(l={})),function(t){t[t.TRACE=0]="TRACE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR"}(f||(f={}));var h=function(t,e,n){var r="".concat(e||"LOGGER",".").concat(f[n]||"ANY"," [").concat((new Date).toLocaleTimeString(),"]: ").concat(t);console.log(r)};function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(){function t(e,n,r,o,i,a){var c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,"unitStats",void 0),d(this,"controller",void 0),d(this,"specialMoves",void 0),d(this,"specialsUsed",void 0),d(this,"location",void 0),d(this,"turnStartLocation",void 0),d(this,"team",void 0),d(this,"name",void 0),this.unitStats={moveSpeed:(c=r).moveSpeed,movesRemaining:c.movesRemaining,maxHealth:c.maxHealth,health:c.health,damage:c.damage,range:c.range},this.controller=e,this.team=n,this.specialMoves=o,this.specialsUsed=[],this.location=i,this.turnStartLocation={x:i.x,y:i.y},this.name=a}var e,n,r;return e=t,(n=[{key:"useSpecialAction",value:function(t){this.specialsUsed.push(t)}},{key:"canUseSpecial",value:function(t){return!this.specialsUsed.includes(t)}},{key:"useMovesTo",value:function(t,e){this.unitStats.movesRemaining-=t,this.location={x:e.x,y:e.y}}},{key:"processNewTurn",value:function(){this.turnStartLocation={x:this.location.x,y:this.location.y},this.unitStats.movesRemaining=this.unitStats.moveSpeed,this.specialsUsed=[]}}])&&y(e.prototype,n),r&&y(e,r),t}();function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g,S=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,"history",void 0),this.history=[{}]}var e,n,r;return e=t,(n=[{key:"playerMove",value:function(t,e){this.verifyPlayerAndAction(t,e);var n=this.history[this.history.length-1],r=this.locationToString(e.unitDoingAction.turnStartLocation),o=n[t][r].moveAction;o?o.targetedCoordinates=e.targetedCoordinates:n[t][r].moveAction=e}},{key:"playerSpecial",value:function(t,e){this.verifyPlayerAndAction(t,e);var n=this.history[this.history.length-1],r=this.locationToString(e.unitDoingAction.turnStartLocation);n[t][r].specialAction=e}},{key:"resetPlayerMoves",value:function(t){this.history[this.history.length-1][t]={}}},{key:"saveAndGetTurnHistory",value:function(){var t=this.history[this.history.length-1];return this.history.push({}),t}},{key:"verifyPlayerAndAction",value:function(t,e){var n=this.history[this.history.length-1],r=n[t],o=this.locationToString(e.unitDoingAction.turnStartLocation);r?r[o]||(n[t][o]={moveAction:null,specialAction:null}):n[t]=v({},o,{moveAction:null,specialAction:null})}},{key:"locationToString",value:function(t){return"".concat(t.x,", ").concat(t.y)}}])&&m(e.prototype,n),r&&m(e,r),t}();!function(t){t[t.ATTACK=0]="ATTACK"}(g||(g={}));var O=function(t){return"".concat(t.x,", ").concat(t.y)};function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T,R=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,"gameId",void 0),w(this,"controllerId",void 0),w(this,"board",void 0),w(this,"boardState",void 0),w(this,"moveHistory",void 0),w(this,"playerIds",void 0),w(this,"endedTurnMap",void 0),this.gameId=e,this.controllerId=n,this.boardState=o||new Array(5),this.moveHistory=new S(r),this.playerIds=r,this.endedTurnMap=new Set}var e,n,r;return e=t,(n=[{key:"copyBoardState",value:function(t){this.boardState=[];for(var e=0;e<t.length;e++){this.boardState.push([]);for(var n=0;n<t[e].length;n++){var r=t[e][n];r?this.boardState[e].push(new b(r.controller,r.team,r.unitStats,r.specialMoves,r.location,r.name)):this.boardState[e].push(null)}}}},{key:"addMovesForPlayer",value:function(t,e){var n=this;e.forEach((function(e){n.moveHistory.playerMove(t,e)}))}},{key:"addSpecialsForPlayer",value:function(t,e){var n=this;e.forEach((function(e){n.moveHistory.playerSpecial(t,e)}))}},{key:"getNumTurns",value:function(){return this.moveHistory.history.length}},{key:"playerSendsEndTurnSignal",value:function(t,e){e?this.endedTurnMap.add(t):this.endedTurnMap.delete(t)}},{key:"allPlayersHaveEndedTurn",value:function(){return this.endedTurnMap.size==this.playerIds.length}},{key:"endTurn",value:function(){var t=this,e=this.moveHistory.saveAndGetTurnHistory();Object.keys(e).forEach((function(n){var r=parseInt(n);Object.keys(e[r]).forEach((function(n){t.doSpecial(e[r][n].specialAction)}))})),Object.keys(e).forEach((function(n){var r=parseInt(n);Object.keys(e[r]).forEach((function(n){var o=e[r][n].moveAction;if(o){var i=t.getUnitAt(o.unitDoingAction.turnStartLocation);t.moveUnit(i,i.turnStartLocation,o.targetedCoordinates)}}))})),this.copyBoardState(this.boardState),this.boardState.forEach((function(e,n){e.forEach((function(e,r){e&&(e.unitStats.health<=0?t.setUnitAt({x:r,y:n},null):e.processNewTurn())}),t)}),this),this.endedTurnMap.clear()}},{key:"resetPlayerMoves",value:function(t){return this.moveHistory.resetPlayerMoves(t),this.boardState}},{key:"getUnitAt",value:function(t){return t&&this.boardState[t.y]?this.boardState[t.y][t.x]:null}},{key:"setUnitAt",value:function(t,e){this.boardState[t.y][t.x]=e}},{key:"moveUnit",value:function(t,e,n){if(t.turnStartLocation!=e)h("".concat(O(t.turnStartLocation)," is not equal to ").concat(O(e)),this.constructor.name,f.ERROR);else{this.setUnitAt(e,null);var r=this.getUnitAt(n);if(r)if(r.team==t.team)h("".concat(t," is on the same team (").concat(t.team,") as ").concat(r),this.constructor.name,f.ERROR);else{var o=r.unitStats.health>t.unitStats.health?r:t,i=Math.min(r.unitStats.health,t.unitStats.health);o.unitStats.health-=i,this.setUnitAt(n,o),t.location=n}else this.setUnitAt(n,t),t.location=n}}},{key:"doSpecial",value:function(t){if(t&&t.actionName==g.ATTACK){var e,n,r,o=this.getUnitAt(null===(e=t.unitDoingAction)||void 0===e?void 0:e.turnStartLocation);if((null===(n=t.unitDoingAction)||void 0===n||null===(r=n.unitStats)||void 0===r?void 0:r.damage)!=(null==o?void 0:o.unitStats.damage))h("ERROR: Damage is not consistent, likely refering to different gameobjects or something is incorrectly null",this.constructor.name,f.WARN);else{var i=this.getUnitAt(t.targetedCoordinates);i&&(null==o?void 0:o.controller)!=(null==i?void 0:i.controller)?(i.unitStats.health-=o.unitStats.damage,h("Unit for player ".concat(i.controller," took ").concat(o.unitStats.damage," damage, health is now at ").concat(i.unitStats.health),this.constructor.name,f.DEBUG)):h("ERROR: unit is attacking null or an ally",this.constructor.name,f.WARN)}}}}])&&E(e.prototype,n),r&&E(e,r),t}();!function(t){t[t.MOVE=0]="MOVE",t[t.SPECIAL=1]="SPECIAL"}(T||(T={}));var P=n(24);function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var k=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}_(k,"DEFAULT_PORT",9911),_(k,"URL","http://localhost:".concat(k.DEFAULT_PORT)),_(k,"HOSTED_URL","https://evilte.ch");var A=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),j(this,"loginStatus",void 0),j(this,"userId",void 0),j(this,"gameOverWinner",void 0),j(this,"lobbyList",void 0),j(this,"socket",void 0),j(this,"messageCallbacks",void 0),j(this,"gameManager",void 0),j(this,"updateBoardStateCallback",void 0),this.gameManager=null,this.loginStatus=null,this.userId=null,this.gameOverWinner=null,this.lobbyList=[];var n=(null==P?void 0:P.PROD)?k.HOSTED_URL:k.URL;for(var r in this.socket=u()(n),this.messageCallbacks={},p)this.messageCallbacks[p[r]]=[];this.updateBoardStateCallback=function(t){h("This function should absolutely never be called",e.constructor.name,f.WARN)}}var e,n,r;return e=t,(n=[{key:"listen",value:function(){var t=this;this.socket.on(p.CONNECT,(function(){h("Socket has connected (".concat(t.socket.connected,")"),t.constructor.name,f.INFO),t.runAndRemoveCallbacks(p.CONNECT)})),this.socket.on(p.DISCONNECT,(function(){t.loginStatus=null,h("Socket has disconnected (".concat(t.socket.connected,")"),t.constructor.name,f.INFO),t.runAndRemoveCallbacks(p.DISCONNECT)})),this.socket.on(p.LOGIN,(function(e){h("Your login status is now: ".concat(l[e.status]),t.constructor.name,f.INFO),t.loginStatus=e.status,t.userId=e.id,e.gameStateToRejoin&&(t.gameManager=new R(e.gameStateToRejoin.gameId,t.userId,[]),t.gameManager.copyBoardState(e.gameStateToRejoin.gameState)),t.runAndRemoveCallbacks(p.LOGIN)})),this.socket.on(p.CREATE_ACCOUNT,(function(e){t.loginStatus=e.status,t.runAndRemoveCallbacks(p.CREATE_ACCOUNT)})),this.socket.on(p.GET_LOBBIES,(function(e){h("Got this response: ".concat(JSON.stringify(e)),t.constructor.name,f.DEBUG),t.lobbyList=e.lobbies,h("Got ".concat(t.lobbyList.length," lobbies"),t.constructor.name,f.INFO),t.runAndRemoveCallbacks(p.GET_LOBBIES)})),this.socket.on(p.END_TURN_SIGNAL,(function(e){t.gameManager.endTurn(),t.gameManager.copyBoardState(e.gameState),t.updateBoardStateCallback(t.gameManager.boardState),t.runAndRemoveCallbacks(p.END_TURN_SIGNAL)})),this.socket.on(p.START_GAME,(function(e){h("Starting game: ".concat(e.gameId),t.constructor.name,f.INFO),t.gameManager=new R(e.gameId,t.userId,[]),t.gameManager.copyBoardState(e.gameState),t.runAndRemoveCallbacks(p.START_GAME)})),this.socket.on(p.RESET_PLAYER_MOVES,(function(e){t.gameManager.copyBoardState(e.gameState),t.updateBoardStateCallback(t.gameManager.boardState),t.runAndRemoveCallbacks(p.RESET_PLAYER_MOVES)})),this.socket.on(p.GAME_HAS_ENDED,(function(e){t.gameOverWinner=e.winner,t.gameManager=null,t.runAndRemoveCallbacks(p.GAME_HAS_ENDED)}))}},{key:"createAccount",value:function(t,e,n){var r={username:t,password:e};n&&this.addOnServerMessageCallback(p.CREATE_ACCOUNT,n),this.socket.emit(p.CREATE_ACCOUNT,r)}},{key:"sendLoginAttempt",value:function(t,e){var n={username:t,password:e};this.socket.emit(p.LOGIN,n)}},{key:"createLobby",value:function(t){var e={lobbySettings:t};this.socket.emit(p.CREATE_LOBBY,e)}},{key:"joinLobby",value:function(t,e,n){n&&this.addOnServerMessageCallback(p.GET_LOBBIES,n);var r={lobbyId:t,teamId:e};this.socket.emit(p.JOIN_LOBBY,r)}},{key:"leaveLobby",value:function(t,e){e&&this.addOnServerMessageCallback(p.GET_LOBBIES,e);var n={lobbyId:t,teamId:-1};this.socket.emit(p.JOIN_LOBBY,n)}},{key:"loadLobbyList",value:function(t){t&&this.addOnServerMessageCallback(p.GET_LOBBIES,t),this.socket.emit(p.GET_LOBBIES)}},{key:"startGame",value:function(t){t&&this.addOnServerMessageCallback(p.START_GAME,t),this.socket.emit(p.START_GAME)}},{key:"sendMove",value:function(t){var e={actionType:T.MOVE,action:t};this.socket.emit(p.PLAYER_INPUT,e)}},{key:"sendSpecial",value:function(t){var e={actionType:T.SPECIAL,action:t};this.socket.emit(p.PLAYER_INPUT,e)}},{key:"setEndTurn",value:function(t){var e={playerHasEndedTurn:t};this.socket.emit(p.END_TURN_SIGNAL,e)}},{key:"resetMoves",value:function(){this.socket.emit(p.RESET_PLAYER_MOVES)}},{key:"concede",value:function(){this.socket.emit(p.CONCEDE)}},{key:"getTimeRemaining",value:function(t){}},{key:"addOnServerMessageCallback",value:function(t,e){this.messageCallbacks[t].push(e)}},{key:"runAndRemoveCallbacks",value:function(t){this.messageCallbacks[t].forEach((function(t){return t()})),this.messageCallbacks[t]=[]}}])&&C(e.prototype,n),r&&C(e,r),t}();n(91);function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U(t,e){return(U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=D(t);if(e){var o=D(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}function I(t,e){return!e||"object"!==x(e)&&"function"!=typeof e?N(t):e}function N(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var G=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&U(t,e)}(a,t);var e,n,r,i=M(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).state={username:"",password:""},e.handleLoginButton=e.handleLoginButton.bind(N(e)),e.createAccountButton=e.createAccountButton.bind(N(e)),e}return e=a,(n=[{key:"handleLoginButton",value:function(t){this.state.username.length>0&&this.state.password.length>0&&(t.preventDefault(),this.props.sendLoginRequestFunc(this.state.username,this.state.password),this.setState((function(t,e){return{username:t.username,password:""}})))}},{key:"createAccountButton",value:function(t){this.state.username.length>0&&this.state.password.length>0&&(t.preventDefault(),this.props.sendCreateAccountRequestFunc(this.state.username,this.state.password),this.setState((function(t,e){return{username:t.username,password:""}})))}},{key:"render",value:function(){var t=this;return o.createElement("form",null,o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"usernameInput"},"Username"),o.createElement("input",{type:"text",className:"form-control",id:"usernameInput","aria-describedby":"usernameHelp",placeholder:"Enter username",value:this.state.username,onChange:function(e){t.setState({username:e.target.value})}})),o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"passwordInput"},"Password"),o.createElement("input",{type:"password",className:"form-control",id:"passwordInput",placeholder:"Password",value:this.state.password,onChange:function(e){t.setState({password:e.target.value})}})),o.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.handleLoginButton},"Login"),o.createElement("button",{type:"submit",className:"btn btn-success",onClick:this.createAccountButton},"Create Account"))}}])&&L(e.prototype,n),r&&L(e,r),a}(o.Component),B=n(3),F=n.n(B),H=n(63);function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var W=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"clamp",value:function(t,e,n){return Math.min(Math.max(t,n),e)}},{key:"locationEquals",value:function(t,e){return t.x==e.x&&t.y==e.y}}],(n=null)&&Y(e.prototype,n),r&&Y(e,r),t}();function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Z(t);if(e){var o=Z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return z(this,n)}}function z(t,e){return!e||"object"!==K(e)&&"function"!=typeof e?q(t):e}function q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $,tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}(i,t);var e,n,r,o=J(i);function i(t,e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Q(q(n=o.call(this,t,e)),"scene",void 0),Q(q(n),"selected",void 0),Q(q(n),"selectedRenderTexture",void 0),Q(q(n),"selectedFillGraphics",void 0),Q(q(n),"specialSelectableRenderTexture",void 0),Q(q(n),"specialSelectableFillGraphics",void 0),Q(q(n),"selectableLocations",void 0),Q(q(n),"state",void 0),Q(q(n),"selectedPath",void 0),Q(q(n),"moveTo",void 0),n.scene=t,n.selected=null,n.state=$.IDLE,n.selectableLocations=[],n.moveTo={x:0,y:0},n.selectedFillGraphics=t.add.graphics({fillStyle:{color:29183,alpha:.85}}),n.specialSelectableFillGraphics=t.add.graphics({fillStyle:{color:16737826,alpha:.85}});var r=t.add.graphics({lineStyle:{width:2,color:31425,alpha:1}});n.forEachTileXY((function(t,e){var n=e.getGridPoints(t.x,t.y,!0);r.strokePoints(n,!0)}));var a=n.getWorldSize();return t.add.renderTexture(0,0,a.x,a.y).draw(r).setDepth(-1),n.selectedRenderTexture=t.add.renderTexture(0,0,a.x,a.y),n.specialSelectableRenderTexture=t.add.renderTexture(0,0,a.x,a.y),r.destroy(),n.setInteractive().on("tiledown",(function(t,e){if(t.leftButtonDown()){h("Clicked on tile ".concat(e.x,",").concat(e.y),n.constructor.name,f.TRACE);var r=n.tileXYZToChess(e.x,e.y,1);if(r)if(r.gameUnit.controller==n.scene.gameManager.controllerId)h("Clicked on unit ".concat(JSON.stringify(r.gameUnit.unitStats)),n.constructor.name,f.TRACE),n.state===$.IDLE&&n.setSelected(e,r);else if(n.state===$.ATTACKING){var o=n.selected[1].gameUnit.unitStats.damage;r.gameUnit.unitStats.health-=o,n.selected[1].gameUnit.useSpecialAction(g.ATTACK);var i={actionName:g.ATTACK,alliesInvolved:[],enemiesInvolved:[r.gameUnit],amounts:[],unitDoingAction:n.selected[1].gameUnit,targetedCoordinates:e};n.scene.client.sendSpecial(i),n.unSelect(),r.emit("drawHealth")}}})).on("tilemove",(function(t,e){n.state==$.SELECTED&&(n.selectedPath.length=1,n.getPath(n.selected[1],e,n.selectedPath),n.selectedPath.reduce((function(t,e,r,o){return 0==r?0:t+n.getDistance(o[r-1],e)}),0)<=n.selected[1].gameUnit.unitStats.movesRemaining&&(n.drawPath(n.selectedPath),n.moveTo={x:e.x,y:e.y}))})),n.scene.input.on("pointerup",(function(t){var e=n.selected&&n.moveTo?n.getDistance(n.selected[0],n.moveTo):0;if(h("Distance between: ".concat(e),n.constructor.name,f.DEBUG),t.leftButtonReleased()&&n.state==$.SELECTED&&e>0){var r=n.moveTo?n.tileXYToChessArray(n.moveTo.x,n.moveTo.y):null;(null==r?void 0:r.length)>0||(n.selected[1].once("move.complete",(function(){if(n.clearPath(),n.state=$.IDLE,0==n.selected[1].gameUnit.unitStats.movesRemaining&&n.selected[1].setTint(16777215),n.moveTo&&e>0){n.selected[1].gameUnit.useMovesTo(e,n.moveTo);var t={unitDoingAction:n.selected[1].gameUnit,targetedCoordinates:n.moveTo};n.scene.client.sendMove(t),n.selected[1].emit("drawHealth"),n.unSelect()}})).moveAlongPath(n.selectedPath),n.state=$.MOVING)}})),n.scene.input.on("pointerdown",(function(t){!t.rightButtonDown()||n.state!=$.SELECTED&&n.state!=$.ATTACKING||n.unSelect()})),n.scene.input.keyboard.on("keydown-A",(function(){var t=n.selected[1],e=g.ATTACK;if(t&&t.gameUnit.specialMoves.includes(e)&&t.gameUnit.canUseSpecial(e)&&n.state==$.SELECTED&&W.locationEquals(t.gameUnit.turnStartLocation,t.gameUnit.location)){var r=n.filledRingToTileXYArray(t.gameUnit.location,t.gameUnit.unitStats.range);n.selectableLocations=r.filter((function(t){var e=n.tileXYZToChess(t.x,t.y,1);return e&&e.gameUnit.controller!=n.scene.client.userId})),n.state=$.ATTACKING,n.clearPath(),n.drawSelectableLocations()}})),n.pathGraphics=t.add.graphics({lineStyle:{width:3,color:31425,alpha:1}}),n.pathTexture=t.add.renderTexture(0,0,a.x,a.y).setDepth(2),n.pathFinder=t.rexBoard.add.pathFinder({occupiedTest:!0,pathMode:"A*"}),n}return e=i,(n=[{key:"getWorldCameraOrigin",value:function(){return this.tileXYToWorldXY(-1,-1)}},{key:"getWorldSize",value:function(){return this.tileXYToWorldXY(this.scene.width,this.scene.height)}},{key:"drawSelectableLocations",value:function(){var t=this;this.specialSelectableRenderTexture.clear(),this.specialSelectableFillGraphics.clear(),this.selectableLocations.forEach((function(e){t.specialSelectableFillGraphics.fillPoints(t.getGridPoints(e.x,e.y,!0),!0)})),this.specialSelectableRenderTexture.draw(this.specialSelectableFillGraphics)}},{key:"setSelected",value:function(t,e){this.selectedRenderTexture.clear(),this.selectedFillGraphics.clear(),e&&(this.selectedFillGraphics.fillPoints(this.getGridPoints(t.x,t.y,!0),!0),this.selectedRenderTexture.draw(this.selectedFillGraphics),this.selected=[{x:t.x,y:t.y},e],this.state=$.SELECTED,this.selectedPath=[this.chessToTileXYZ(e)])}},{key:"unSelect",value:function(){this.setSelected(null,null),this.moveTo=null,this.state=$.IDLE,this.clearPath(),this.selectedRenderTexture.clear(),this.specialSelectableRenderTexture.clear(),this.specialSelectableFillGraphics.clear()}},{key:"clearPath",value:function(){return this.pathTexture.clear(),this}},{key:"drawPath",value:function(t){return this.pathGraphics.strokePoints(this.tileXYArrayToWorldXYArray(t)),this.pathTexture.clear().draw(this.pathGraphics),this.pathGraphics.clear(),this}},{key:"getPath",value:function(t,e,n){return this.pathFinder.setChess(t).findPath(e,void 0,!1,n)}}])&&X(e.prototype,n),r&&X(e,r),i}(H.a);!function(t){t.IDLE="idle",t.SELECTED="selected",t.ATTACKING="attacking",t.MOVING="moving"}($||($={}));var et=n.p+"assets/fighter.png",nt=n.p+"assets/enemyfighter.png",rt=n.p+"assets/speeder.png",ot=n.p+"assets/enemyspeeder.png",it=n.p+"assets/destroyer.png",at=n.p+"assets/enemydestroyer.png",ct=n.p+"assets/mainbase.png",st=n.p+"assets/mainbaseenemy.png";function ut(t){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ft(t,e){return(ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=dt(t);if(e){var o=dt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ht(this,n)}}function ht(t,e){return!e||"object"!==ut(e)&&"function"!=typeof e?yt(t):e}function yt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ft(t,e)}(i,t);var e,n,r,o=pt(i);function i(t,e,n,r,a){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),bt(yt(c=o.call(this,t,e,n,r)),"moveTo",void 0),bt(yt(c),"gameUnit",void 0),c.gameUnit=a,t.add.existing(yt(c)),t.board.addChess(yt(c),e,n,1),c.moveTo=t.rexBoard.add.moveTo(yt(c),{rotateToTarget:!0,speed:100*a.unitStats.moveSpeed}),c}return e=i,(n=[{key:"moveAlongPath",value:function(t){var e=this;if(0!==t.length)return this.moveTo.once("complete",(function(){e.moveAlongPath(t)}),this),this.moveTo.moveTo(t.shift()),this;this.emit("move.complete")}}])&&lt(e.prototype,n),r&&lt(e,r),i}(F.a.GameObjects.Image);function vt(t){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t,e){return(gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function St(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Et(t);if(e){var o=Et(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ot(this,n)}}function Ot(t,e){return!e||"object"!==vt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Et(t){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gt(t,e)}(n,t);var e=St(n);function n(t,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var i=o.controller==t.client.userId;return e.call(this,t,r.x,r.y,i?"fighter":"enemyFighter",o)}return n}(mt);function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Rt(this,"bar",void 0),Rt(this,"parentUnit",void 0),Rt(this,"scene",void 0),Rt(this,"barHeight",void 0),this.bar=new Phaser.GameObjects.Graphics(e),this.parentUnit=n,this.scene=e,this.barHeight=15,this.draw=this.draw.bind(this),this.draw(),this.scene.add.existing(this.bar),this.onParentUnitMove=this.onParentUnitMove.bind(this),n.once("drawHealth",this.onParentUnitMove)}var e,n,r;return e=t,(n=[{key:"onParentUnitMove",value:function(){this.draw(),this.parentUnit.once("drawHealth",this.onParentUnitMove)}},{key:"draw",value:function(){this.bar.clear();var t=this.scene.board.tileXYToWorldXY(this.parentUnit.gameUnit.location.x,this.parentUnit.gameUnit.location.y),e={x:t.x-this.parentUnit.displayWidth/2,y:t.y-this.parentUnit.displayHeight/2-this.barHeight-10};if(this.bar.fillStyle(0),this.bar.fillRect(e.x,e.y,this.parentUnit.displayWidth,this.barHeight),this.parentUnit.gameUnit.unitStats.health>0){var n=[e.x+2,e.y+2,this.parentUnit.displayWidth-2,this.barHeight-2];this.bar.fillStyle(16777215),this.bar.fillRect(n[0],n[1],n[2],n[3]);var r=this.parentUnit.displayWidth*(this.parentUnit.gameUnit.unitStats.health/this.parentUnit.gameUnit.unitStats.maxHealth);if(this.parentUnit.gameUnit.controller==this.scene.client.userId){var o={x:e.x,y:e.y-this.barHeight/2-2};this.bar.fillStyle(0),this.bar.fillRect(o.x,o.y,this.parentUnit.displayWidth,this.barHeight/2);var i=[o.x+2,o.y+2,this.parentUnit.displayWidth-2,this.barHeight/2-2];this.bar.fillStyle(16777215),this.bar.fillRect(i[0],i[1],i[2],i[3]);var a=this.parentUnit.displayWidth*(this.parentUnit.gameUnit.unitStats.movesRemaining/this.parentUnit.gameUnit.unitStats.moveSpeed);this.bar.fillStyle(16765696),this.bar.fillRect(i[0],i[1],a,i[3]),this.bar.fillStyle(65474)}else this.bar.fillStyle(16716066);this.bar.fillRect(n[0],n[1],r,n[3])}}}])&&Tt(e.prototype,n),r&&Tt(e,r),t}();function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kt(t,e){return(kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=At(t);if(e){var o=At(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jt(this,n)}}function jt(t,e){return!e||"object"!==_t(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function At(t){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kt(t,e)}(n,t);var e=Ct(n);function n(t,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var i=o.controller==t.client.userId;return e.call(this,t,r.x,r.y,i?"speeder":"enemySpeeder",o)}return n}(mt),Lt=n(6);function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mt(t,e){return(Mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function It(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Dt(t);if(e){var o=Dt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nt(this,n)}}function Nt(t,e){return!e||"object"!==Ut(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dt(t){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mt(t,e)}(n,t);var e=It(n);function n(t,r,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.call(this,t,r,Lt.speeder,[g.ATTACK],o,"SpeederUnit")}return n}(b);function Bt(t){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ft(t,e){return(Ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Wt(t);if(e){var o=Wt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yt(this,n)}}function Yt(t,e){return!e||"object"!==Bt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wt(t){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ft(t,e)}(n,t);var e=Ht(n);function n(t,r,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.call(this,t,r,Lt.fighter,[g.ATTACK],o,"FighterUnit")}return n}(b);function Xt(t){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vt(t,e){return(Vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Jt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=qt(t);if(e){var o=qt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return zt(this,n)}}function zt(t,e){return!e||"object"!==Xt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qt(t){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vt(t,e)}(n,t);var e=Jt(n);function n(t,r,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.call(this,t,r,Lt.destroyer,[g.ATTACK],o,"DestroyerUnit")}return n}(b);function Qt(t){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $t(t,e){return($t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function te(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ne(t);if(e){var o=ne(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ee(this,n)}}function ee(t,e){return!e||"object"!==Qt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ne(t){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var re=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$t(t,e)}(n,t);var e=te(n);function n(t,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var i=o.controller==t.client.userId;return e.call(this,t,r.x,r.y,i?"destroyer":"enemyDestroyer",o)}return n}(mt);function oe(t){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ie(t,e){return(ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ae(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=se(t);if(e){var o=se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ce(this,n)}}function ce(t,e){return!e||"object"!==oe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function se(t){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ue=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ie(t,e)}(n,t);var e=ae(n);function n(t,r,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.call(this,t,r,Lt.mainbase,[],o,"MainBaseUnit")}return n}(b);function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fe(t,e){return(fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ye(t);if(e){var o=ye(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return he(this,n)}}function he(t,e){return!e||"object"!==le(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ye(t){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var de=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fe(t,e)}(n,t);var e=pe(n);function n(t,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var i=o.controller==t.client.userId;return e.call(this,t,r.x,r.y,i?"mainbase":"enemyMainbase",o)}return n}(mt);function be(t){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ve(t,e,n){return(ve="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=we(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Se(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=we(t);if(e){var o=we(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Oe(this,n)}}function Oe(t,e){return!e||"object"!==be(e)&&"function"!=typeof e?Ee(t):e}function Ee(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function we(t){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Te(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Re=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ge(t,e)}(i,t);var e,n,r,o=Se(i);function i(t,e,n,r){var a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);return Te(Ee(a=o.call(this,{active:!1})),"board",void 0),Te(Ee(a),"rexBoard",void 0),Te(Ee(a),"cameraController",void 0),Te(Ee(a),"width",void 0),Te(Ee(a),"height",void 0),Te(Ee(a),"client",void 0),Te(Ee(a),"gameManager",void 0),Te(Ee(a),"phaserGameUnitPool",void 0),a.width=t,a.height=e,a.client=n,a.gameManager=null,a.rexBoard=null,a.loadBoardState=a.loadBoardState.bind(Ee(a)),a.client.updateBoardStateCallback=a.loadBoardState,a.gameManager=r,a.phaserGameUnitPool=[],a}return e=i,r=[{key:"getSceneName",value:function(){return"GameScene"}}],(n=[{key:"preload",value:function(){this.load.scenePlugin({key:"rexboardplugin",url:"https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/dist/rexboardplugin.min.js",sceneKey:"rexBoard"}),this.load.image("fighter",et),this.load.image("enemyFighter",nt),this.load.image("speeder",rt),this.load.image("enemySpeeder",ot),this.load.image("destroyer",it),this.load.image("enemyDestroyer",at),this.load.image("mainbase",ct),this.load.image("enemyMainbase",st)}},{key:"create",value:function(){var t={grid:this.getHexagonGrid(this),width:this.width,height:this.height,wrap:!1};this.board=new tt(this,t),this.loadBoardState();var e=this.input.keyboard.createCursorKeys();this.cameraController=new F.a.Cameras.Controls.SmoothedKeyControl({camera:this.cameras.main,left:e.left,right:e.right,up:e.up,down:e.down,zoomIn:this.input.keyboard.addKey(F.a.Input.Keyboard.KeyCodes.MINUS),zoomOut:this.input.keyboard.addKey(F.a.Input.Keyboard.KeyCodes.PLUS),acceleration:.09,drag:.003,maxSpeed:.5});var n=this.board.getWorldSize(),r=this.board.getWorldCameraOrigin();this.cameraController.camera.setBounds(r.x,r.y,n.x,n.y+300)}},{key:"update",value:function(t,e){ve(we(i.prototype),"update",this).call(this,t,e),this.cameraController.update(e),this.cameraController.camera.setZoom(W.clamp(this.cameraController.camera.zoom,3,1))}},{key:"loadBoardState",value:function(){var t=this;this.board.removeAllChess(!0),this.board.unSelect(),this.phaserGameUnitPool.forEach((function(t){t.destroy()})),this.phaserGameUnitPool=[],this.board.forEachTileXY((function(e,n){var r={x:e.x,y:e.y},o=t.gameManager.getUnitAt(r);if(o){var i=o.name,a=i==Kt.prototype.constructor.name?new wt(t,r,o):i==Gt.prototype.constructor.name?new xt(t,r,o):i==Zt.prototype.constructor.name?new re(t,r,o):i==ue.prototype.constructor.name?new de(t,r,o):null,c=new Pt(t,a);t.phaserGameUnitPool.push(a),t.phaserGameUnitPool.push(c.bar)}}),this)}},{key:"getHexagonGrid",value:function(t){return t.rexBoard.add.hexagonGrid({x:60,y:60,size:60,staggeraxis:"x",staggerindex:"odd"})}},{key:"getBoard",value:function(){return this.board}}])&&me(e.prototype,n),r&&me(e,r),i}(F.a.Scene),Pe=n.p+"assets/uiselector.png";function _e(t){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ce(t,e){return(Ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function je(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Le(t);if(e){var o=Le(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ae(this,n)}}function Ae(t,e){return!e||"object"!==_e(e)&&"function"!=typeof e?xe(t):e}function xe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Le(t){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Me=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ce(t,e)}(i,Phaser.Scene);var e,n,r,o=je(i);function i(t,e,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);return Ue(xe(r=o.call(this,{active:!1})),"width",void 0),Ue(xe(r),"height",void 0),Ue(xe(r),"board",void 0),Ue(xe(r),"theGame",void 0),Ue(xe(r),"rect",void 0),Ue(xe(r),"minX",void 0),Ue(xe(r),"minY",void 0),Ue(xe(r),"maxX",void 0),Ue(xe(r),"maxY",void 0),Ue(xe(r),"selectedX",void 0),Ue(xe(r),"selectedY",void 0),Ue(xe(r),"runInitFlag",void 0),Ue(xe(r),"unitSelected",void 0),Ue(xe(r),"theWord",void 0),Ue(xe(r),"unitPictureMap",void 0),Ue(xe(r),"selectedUnitPicture",void 0),r.width=t,r.height=e,r.theGame=n,r.runInitFlag=!1,r.displayStats=r.displayStats.bind(xe(r)),r}return e=i,(n=[{key:"preload",value:function(){this.load.image("fighter1",et),this.load.image("enemyFighter1",nt),this.load.image("speeder1",rt),this.load.image("enemySpeeder1",ot),this.load.image("destroyer1",it),this.load.image("enemyDestroyer1",at),this.load.image("UIbackground",Pe)}},{key:"create",value:function(){var t=this,e=this.cameras.main.width,n=this.cameras.main.height;this.rect=this.add.rectangle(0,n,2*e,n/3,6711039),this.minX=0,this.minY=this.rect.getTopLeft().y,this.maxX=this.rect.getBottomRight().x,this.maxY=this.rect.getBottomRight().y,this.rect.destroy(),this.add.image(350,this.minY,"UIbackground").scale=1.75,this.theWord=this.add.text(300,this.minY-90,""),this.theWord.setStroke("black",2),this.rect.destroy(),this.theWord.setColor("cyan"),this.theWord.setFontSize(100);var r=this.add.image(130,n-150,"fighter1");r.setVisible(!1);var o=this.add.image(100,100,"enemyFighter1");o.setVisible(!1);var i=this.add.image(130,n-170,"speeder1");i.setVisible(!1);var a=this.add.image(100,100,"enemySpeeder1");a.setVisible(!1);var c=this.add.image(130,n-170,"destroyer1");c.setVisible(!1);var s=this.add.image(100,100,"enemyDestroyer1");s.setVisible(!1),this.selectedUnitPicture=s,this.unitPictureMap={fighter1:r,enemyFighter1:o,speeder1:i,enemySpeeder1:a,destroyer1:c,enemyDestroyer1:s},Object.keys(this.unitPictureMap).forEach((function(e){t.unitPictureMap[e].scale=2}))}},{key:"update",value:function(){var t=this;!this.runInitFlag&&this.theGame.board&&(this.runInitFlag=!0,this.board=this.theGame.board,this.board.setInteractive().on("tiledown",(function(e,n){t.displayStats(),t.displayPicture()})))}},{key:"displayStats",value:function(){var t=this.board.selected[1].gameUnit.unitStats,e=t.moveSpeed,n=t.movesRemaining,r=t.maxHealth,o=t.health,i=t.range,a=t.damage,c="Energy: "+n.toString()+"/"+e.toString()+"\n";c+="Health: "+r+"/"+o+"\n",c+="Range: "+i+"\n",c+="Damage: "+a+"\n",c+="Ammo Remaining: "+(this.board.selected[1].gameUnit.specialMoves.length-this.board.selected[1].gameUnit.specialsUsed.length),this.theWord.setText(c),this.theWord.setFont("30px Arial"),this.board.selected[1].once("drawHealth",this.displayStats)}},{key:"displayPicture",value:function(){var t,e;null===(t=this.selectedUnitPicture)||void 0===t||t.setVisible(!1),null===(e=this.unitPictureMap[this.formatPicName(this.board.selected[1].gameUnit.name)])||void 0===e||e.setVisible(!0),this.selectedUnitPicture=this.unitPictureMap[this.formatPicName(this.board.selected[1].gameUnit.name)]}},{key:"formatPicName",value:function(t){var e=t.charAt(0);e=e.toLowerCase();var n=t.length;return e+t.substring(1,n-4)+"1"}}])&&ke(e.prototype,n),r&&ke(e,r),i}();function Ie(t){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ne(t,e){return(Ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function De(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fe(t);if(e){var o=Fe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ge(this,n)}}function Ge(t,e){return!e||"object"!==Ie(e)&&"function"!=typeof e?Be(t):e}function Be(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fe(t){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var He=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ne(t,e)}(n,t);var e=De(n);function n(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var o,i,a,c={type:F.a.AUTO,width:1600,height:900,scale:{mode:F.a.Scale.FIT,autoCenter:F.a.Scale.CENTER_BOTH},parent:"divId",dom:{createContainer:!0},physics:{default:"arcade"}};r=e.call(this,c),o=Be(r),a=void 0,(i="client")in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,r.client=t;var s=t.gameManager.boardState.length,u=t.gameManager.boardState[0].length;r.canvas.oncontextmenu=function(t){t.preventDefault()};var l=new Re(u,s,t,t.gameManager);return r.scene.add(Re.getSceneName(),l,!0),r.scene.add("UI",new Me(30,30,l),!0),r}return n}(F.a.Game);function Ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function We(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ke=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"getMaps",value:function(){return[{id:"1",name:"Faceoff"},{id:"2",name:"Edgeworld"}]}},{key:"getMapFromId",value:function(e,n){return t.mapStringToMap(t.mapIdToString[e],n)}},{key:"mapStringToMap",value:function(e,n){var r,o=[],i=0;r=e.indexOf(" ",i);var a=parseInt(e.substr(i,r-i));i=r+1,r=e.indexOf(" ",i);var c=parseInt(e.substr(i,r-i));i=r+1;for(var s=0;s<c;s++){o.push([]);for(var u=0;u<a;u++){r=e.indexOf(" ",i);var l=e.substr(i,r-i),p=l.replace(/\D/g,""),y=l.replace(/[0-9]/g,""),d=t.stringToUnitContructor[y];d?o[s].push(d(n[parseInt(p)],p,{x:u,y:s})):o[s].push(null),i=r+1}}return h(JSON.stringify(o),this.constructor.name,f.DEBUG),o}}],(n=null)&&Ye(e.prototype,n),r&&Ye(e,r),t}();function Xe(t){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Je(t,e){return(Je=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ze(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ze(t);if(e){var o=Ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qe(this,n)}}function qe(t,e){return!e||"object"!==Xe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ze(t){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}We(Ke,"unitToString",{FighterUnit:"f",null:"n"}),We(Ke,"stringToUnitContructor",{f:function(t,e,n){return new Kt(t,e,n)},s:function(t,e,n){return new Gt(t,e,n)},d:function(t,e,n){return new Zt(t,e,n)},b:function(t,e,n){return new ue(t,e,n)},n:null}),We(Ke,"mapIdToString",{1:"15 8 n n n n n n n n n n n n n n n f0 s0 f0 n n n n n n n n n n n n n n n n n n n n n f1 s1 f1 n n n b0 n n d0 n n n n n n d1 n n n b1 n n n n n n n n n n n n n n n f0 s0 f0 n n n n n n n n n n n n n n n n n n n n n f1 s1 f1 n n n n n n n n n n n n n n n n n n ",2:"20 15 n n n n n n n n n n n n n n n n n n n d0 n b0 n s0 s0 n n n n n n n n n n n n n n n n n n d0 n n n n n n n n n n n n n n n n n n s0 n n n n n n n n n n n n n n n n n n s0 n n f0 n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n f1 n n n n s1 n n n n n n n n n n n n n n n n n n s1 n n n n n n n n n n n n n n n n n n d1 n n n n n n n n n n n n n n f1 n n s1 s1 n b1 n d1 n n n n n n n n n n n n n n n n n n n "});var Qe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Je(t,e)}(a,t);var e,n,r,i=ze(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).state={},e}return e=a,(n=[{key:"render",value:function(){var t,e=this,n=null===(t=Ke.getMaps().find((function(t){return t.id==e.props.lobby.settings.mapId})))||void 0===t?void 0:t.name;return o.createElement(o.Fragment,null,o.createElement("tr",{className:this.props.joined?"table-primary":"",onClick:function(){e.props.onClickJoin(e.props.index)}},o.createElement("th",{scope:"row"},this.props.index+1),o.createElement("td",null,this.props.lobby.settings.lobbyName),o.createElement("td",null,this.props.lobby.players.length," / 2"),o.createElement("td",null,this.props.lobby.id),o.createElement("td",null,this.props.lobby.lobbyLeader),o.createElement("td",null,n)))}}])&&Ve(e.prototype,n),r&&Ve(e,r),a}(o.Component);function $e(t){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function en(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tn(Object(n),!0).forEach((function(e){nn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function nn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function on(t,e){return(on=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function an(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=un(t);if(e){var o=un(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return cn(this,n)}}function cn(t,e){return!e||"object"!==$e(e)&&"function"!=typeof e?sn(t):e}function sn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function un(t){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ln=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&on(t,e)}(a,t);var e,n,r,i=an(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).state={settings:{maxPlayersPerTeam:1,numTeams:2,turnTime:0,mapId:"1",lobbyName:"".concat(e.props.username,"'s Lobby")}},e.setLobbyName=e.setLobbyName.bind(sn(e)),e.setMapId=e.setMapId.bind(sn(e)),e}return e=a,(n=[{key:"setLobbyName",value:function(t){this.setState((function(e,n){return{settings:en(en({},e.settings),{},{lobbyName:t})}}))}},{key:"setMapId",value:function(t){this.setState((function(e,n){return{settings:en(en({},e.settings),{},{mapId:t})}}))}},{key:"render",value:function(){var t=this,e=Ke.getMaps();return o.createElement("div",{className:"col-4 text-center justify-content-center",style:{backgroundColor:"white"}},o.createElement("form",{onSubmit:function(e){e.preventDefault(),t.props.createLobby(t.state.settings)}},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"lobbyName"},"Lobby Name:"),o.createElement("input",{type:"text",id:"lobbyName",value:this.state.settings.lobbyName,className:"form-control",onChange:function(e){t.setLobbyName(e.target.value)}})),o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"map"},"Map:"),o.createElement("select",{id:"map",value:this.state.settings.mapId,className:"form-control",onChange:function(e){t.setMapId(e.target.value)}},e.map((function(t){return o.createElement("option",{key:t.id,value:t.id},t.name)})))),o.createElement("button",{className:"btn btn-primary",type:"submit",value:"Submit"},"Create Lobby")))}}])&&rn(e.prototype,n),r&&rn(e,r),a}(o.Component);function fn(t){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hn(t,e){return(hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mn(t);if(e){var o=mn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dn(this,n)}}function dn(t,e){return!e||"object"!==fn(e)&&"function"!=typeof e?bn(t):e}function bn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mn(t){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hn(t,e)}(a,t);var e,n,r,i=yn(a);function a(t){var e,n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),e=i.call(this,t),n=bn(e),o=void 0,(r="interval")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,e.state={lobbyList:[]},e.reloadLobbyList=e.reloadLobbyList.bind(bn(e)),e.lobbyButton=e.lobbyButton.bind(bn(e)),e.reloadState=e.reloadState.bind(bn(e)),e.createLobby=e.createLobby.bind(bn(e)),e.interval=setInterval(e.reloadLobbyList,2e3),e}return e=a,(n=[{key:"reloadLobbyList",value:function(){this.props.client.loadLobbyList(this.reloadState)}},{key:"reloadState",value:function(){this.setState({lobbyList:this.props.client.lobbyList})}},{key:"createLobby",value:function(t){this.props.client.createLobby(t),this.props.client.addOnServerMessageCallback(p.GET_LOBBIES,this.reloadState)}},{key:"componentDidMount",value:function(){var t=this;this.reloadLobbyList(),this.props.client.addOnServerMessageCallback(p.START_GAME,(function(){t.props.gameHasLoadedCallback()}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"lobbyButton",value:function(t){var e=this.props.client.lobbyList[t],n=parseInt(Object.keys(e.playerTeamMap).find((function(t){var n=parseInt(t);return 0==Object.keys(e.playerTeamMap[n]).length})));this.props.client.joinLobby(e.id,n||0,this.reloadState)}},{key:"render",value:function(){var t,e,n,r=this,i=this.props.client.lobbyList.findIndex((function(t,e){return t.players.includes(r.props.client.userId)})),a=o.createElement(o.Fragment,null,-1!=i?o.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){r.props.client.leaveLobby(r.props.client.lobbyList[i].id,r.reloadState)}},"Leave Lobby"):o.createElement(o.Fragment,null)),c=o.createElement(o.Fragment,null,(null===(t=this.props.client)||void 0===t||null===(e=t.lobbyList[i])||void 0===e?void 0:e.lobbyLeader)==this.props.client.userId&&(null===(n=this.props.client)||void 0===n?void 0:n.lobbyList[i].players.length)>1?o.createElement("button",{type:"button",className:"btn btn-success",onClick:function(){r.props.client.startGame()}},"Start Game"):o.createElement(o.Fragment,null," ")," "),s=[];return this.state.lobbyList.forEach((function(t,e){s.push(o.createElement(Qe,{lobby:t,key:e,joined:e==i,index:e,onClickJoin:r.lobbyButton}))})),o.createElement(o.Fragment,null,a,c,o.createElement("table",{className:"table table-bordered table-hover"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",{scope:"col"},"#"),o.createElement("th",{scope:"col"},"Name"),o.createElement("th",{scope:"col"},"Players"),o.createElement("th",{scope:"col"},"ID"),o.createElement("th",{scope:"col"},"Manager"),o.createElement("th",{scope:"col"},"Map"))),o.createElement("tbody",null,s)),o.createElement("div",{className:"fixed-bottom"},o.createElement(ln,{username:this.props.username,createLobby:this.createLobby})))}}])&&pn(e.prototype,n),r&&pn(e,r),a}(o.Component);function gn(t){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function On(t,e){return(On=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function En(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Rn(t);if(e){var o=Rn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wn(this,n)}}function wn(t,e){return!e||"object"!==gn(e)&&"function"!=typeof e?Tn(t):e}function Tn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rn(t){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&On(t,e)}(a,t);var e,n,r,i=En(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).state={hasEndedTurn:!1},e.updateEndTurn=e.updateEndTurn.bind(Tn(e)),e.updateEndTurn(),e}return e=a,(n=[{key:"updateEndTurn",value:function(){var t=this;this.props.client.addOnServerMessageCallback(p.END_TURN_SIGNAL,(function(){t.setState({hasEndedTurn:!1}),h("Calling end turn",t.constructor.name,f.DEBUG)}))}},{key:"render",value:function(){var t=this;return o.createElement(o.Fragment,null,o.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){t.updateEndTurn(),t.props.client.setEndTurn(!t.state.hasEndedTurn),t.setState({hasEndedTurn:!t.state.hasEndedTurn})}},this.state.hasEndedTurn?"Unend Turn":"End Turn"),o.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(){t.props.client.resetMoves()}},"Reset Moves"),o.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){t.props.client.concede()}},"Concede"))}}])&&Sn(e.prototype,n),r&&Sn(e,r),a}(o.Component);function _n(t){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cn(t,e){return(Cn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ln(t);if(e){var o=Ln(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return An(this,n)}}function An(t,e){return!e||"object"!==_n(e)&&"function"!=typeof e?xn(t):e}function xn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ln(t){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Un=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cn(t,e)}(a,t);var e,n,r,i=jn(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).state={client:new A,username:null,errorMessage:null,successMessage:null,game:null},e.state.client.listen(),e.handleLoginButton=e.handleLoginButton.bind(xn(e)),e.handleCreateAccountButton=e.handleCreateAccountButton.bind(xn(e)),e.gameHasLoaded=e.gameHasLoaded.bind(xn(e)),e}return e=a,(n=[{key:"handleLoginButton",value:function(t,e){var n=this;if(!this.state.game){var r=this.state.client;r.addOnServerMessageCallback(p.LOGIN,(function(){r.loginStatus==l.SUCCESS?(n.setState({username:t,errorMessage:null}),console.log("login successful"),n.state.client.gameManager&&n.gameHasLoaded()):n.setState({errorMessage:"Username or password is incorrect",successMessage:null})})),r.addOnServerMessageCallback(p.GAME_HAS_ENDED,(function(){n.state.game.destroy(!0),n.setState({game:null}),alert("The Game is over: ".concat(r.gameOverWinner," has won"))})),r.sendLoginAttempt(t,e)}}},{key:"handleCreateAccountButton",value:function(t,e){var n=this,r=this.state.client;r.createAccount(t,e,(function(){r.loginStatus==l.SUCCESS?n.setState({successMessage:"Account has been successfully created",errorMessage:null}):n.setState({errorMessage:"Username is taken",successMessage:null})}))}},{key:"gameHasLoaded",value:function(){this.setState({game:new He(this.state.client)})}},{key:"render",value:function(){var t=o.createElement("div",{className:"col-6 text-center",style:{backgroundColor:"white"}},o.createElement(G,{sendLoginRequestFunc:this.handleLoginButton,sendCreateAccountRequestFunc:this.handleCreateAccountButton}),this.state.errorMessage?o.createElement("div",{style:{color:"red"}},this.state.errorMessage):o.createElement(o.Fragment,null),this.state.successMessage?o.createElement("div",{style:{color:"green"}},this.state.successMessage):o.createElement(o.Fragment,null));return o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"row justify-content-center"},this.state.username?this.state.game?o.createElement(Pn,{client:this.state.client}):o.createElement("div",{style:{backgroundColor:"white"}},o.createElement(vn,{client:this.state.client,gameHasLoadedCallback:this.gameHasLoaded,username:this.state.username})):t))}}])&&kn(e.prototype,n),r&&kn(e,r),a}(o.Component),Mn=n(19),In=n.n(Mn),Nn=n(35),Dn={insert:"head",singleton:!1};In()(Nn.a,Dn),Nn.a.locals;c.a.render(i.a.createElement(Un,null),document.getElementById("app"))},24:function(t){t.exports=JSON.parse('{"PROD":false}')},35:function(t,e,n){"use strict";var r=n(20),o=n.n(r)()((function(t){return t[1]}));o.push([t.i,"body {\r\n    background-color: black;\r\n    overflow: hidden;\r\n}\r\n",""]),e.a=o},6:function(t){t.exports=JSON.parse('{"fighter":{"moveSpeed":3,"movesRemaining":3,"maxHealth":5,"health":5,"damage":2,"range":2},"speeder":{"moveSpeed":7,"movesRemaining":7,"maxHealth":3,"health":3,"damage":1,"range":1},"destroyer":{"moveSpeed":1,"movesRemaining":1,"maxHealth":8,"health":8,"damage":3,"range":3},"mainbase":{"moveSpeed":0,"movesRemaining":0,"maxHealth":15,"health":15,"damage":0,"range":0}}')},88:function(t,e){}});